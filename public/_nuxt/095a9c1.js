(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{489:function(t,e,r){"use strict";r.r(e);r(13),r(81),r(12),r(10),r(101),r(30),r(31),r(15),r(16),r(14),r(35),r(119),r(80),r(11),r(87),r(62),r(458);var c=r(3),n=r(61);function o(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={name:"EditProduct",layout:"admin",head:{title:"Edit Product - Project Z"},transition:"fade",validate:function(t){return/^\d+$/.test(t.params.productId)||t.redirect("/admin/products"),!0},data:function(){return{nameProduct:"",regularPrice:0,salePrice:0,quantity:0,description:"",selectCat:null,success:!1,fail:!1,imageProduct:null,imagePreview:null,imageOld:null}},watch:{success:function(){var t=this;setTimeout((function(){t.success=!1}),2e3)},fail:function(){var t=this;setTimeout((function(){t.fail=!1}),2e3)}},created:function(){this.productCurrent&&(this.nameProduct=this.productCurrent.name,this.regularPrice=this.productCurrent.regularPrice,this.salePrice=this.productCurrent.salePrice,this.quantity=this.productCurrent.quantity,this.description=this.productCurrent.description,this.selectCat={id:this.productCurrent.categoryId,name:this.productCurrent.categoryName},this.imagePreview=this.productCurrent.image,this.imageOld=this.productCurrent.image)},computed:l(l({},Object(n.c)({getProducts:function(t){return t.Product.products},getCategories:function(t){return t.Category.categories}})),{},{productCurrent:function(){return this.getProducts[this.$route.params.productId]},nameState:function(){return this.nameProduct.length>0},priceState:function(){return this.regularPrice>0}}),methods:l(l({},Object(n.b)({actEditProduct:"Product/actEditProduct"})),{},{onFileChange:function(t){null!=t&&(this.imagePreview=window.URL.createObjectURL(t.target.files[0]))},handleChangeImage:function(){this.$refs.changeImage.$el.querySelector("input[type=file]").click()},editProduct:function(){var t=this.getProducts.map((function(t){return t.name.toLowerCase()}));this.nameState&&this.priceState&&(this.nameProduct!=this.productCurrent.name&&t.includes(this.nameProduct.toLowerCase())?this.fail=!0:(this.actEditProduct({name:this.nameProduct,regularPrice:this.regularPrice,salePrice:this.salePrice,quantity:this.quantity,description:this.description,image:this.imageProduct,imageOld:this.imageOld,category:this.selectCat,id:this.productCurrent.id,index:this.$route.params.productId}),this.success=!0))}})},m=r(49),component=Object(m.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"content-admin"},[r("h3",[t._v("Edit product "+t._s(t.nameProduct))]),t._v(" "),r("b-form",{ref:"form",attrs:{id:"edit-product-form"},on:{submit:function(e){return e.preventDefault(),t.editProduct(e)}}},[r("div",{staticClass:"row my-3"},[r("div",{staticClass:"col-12"},[r("b-button",{staticClass:"btn-primary ",on:{click:t.handleChangeImage}},[t._v("Image"),r("b-icon",{staticClass:"ml-2",attrs:{icon:"card-image"}})],1)],1)]),t._v(" "),r("div",{staticClass:"row mb-3"},[r("div",{staticClass:"col-12"},[t.imagePreview?r("img",{staticClass:"image-preview",attrs:{alt:"image",src:t.imagePreview}}):t._e()])]),t._v(" "),r("b-form-file",{ref:"changeImage",staticClass:"d-none",attrs:{type:"file",accept:"image/*"},on:{change:t.onFileChange},model:{value:t.imageProduct,callback:function(e){t.imageProduct=e},expression:"imageProduct"}}),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6 col-12 mb-2"},[r("h6",[t._v("Name")]),t._v(" "),r("b-form-input",{attrs:{placeholder:"Name",state:t.nameState},model:{value:t.nameProduct,callback:function(e){t.nameProduct=e},expression:"nameProduct"}}),t._v(" "),r("b-form-invalid-feedback",{attrs:{id:"input-live-feedback"}},[t._v("\n                    Required\n                ")])],1),t._v(" "),r("div",{staticClass:"col-md-6 col-12 mb-2"},[r("h6",[t._v("Quantity")]),t._v(" "),r("b-form-input",{attrs:{placeholder:"Quantity",type:"number",onkeydown:"return event.keyCode !== 69"},model:{value:t.quantity,callback:function(e){t.quantity=e},expression:"quantity"}})],1)]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6 col-12 mb-2"},[r("h6",[t._v("Regular Price")]),t._v(" "),r("b-form-input",{attrs:{placeholder:"Regular price",state:t.priceState,type:"number",onkeydown:"return event.keyCode !== 69"},model:{value:t.regularPrice,callback:function(e){t.regularPrice=e},expression:"regularPrice"}}),t._v(" "),r("b-form-invalid-feedback",{attrs:{id:"input-live-feedback"}},[t._v("\n                    Required\n                ")])],1),t._v(" "),r("div",{staticClass:"col-md-6 col-12"},[r("h6",[t._v("Sale Price")]),t._v(" "),r("b-form-input",{attrs:{placeholder:"Sale price",type:"number",onkeydown:"return event.keyCode !== 69"},model:{value:t.salePrice,callback:function(e){t.salePrice=e},expression:"salePrice"}})],1)]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-9 col-12"},[r("h6",[t._v("Description")]),t._v(" "),r("b-form-textarea",{staticClass:"mb-3",attrs:{placeholder:"Description",rows:"3","max-rows":"6"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),t._v(" "),r("div",{staticClass:"col-md-3 col-12"},[r("h6",[t._v("Category")]),t._v(" "),r("b-form-select",{staticClass:"mb-2",attrs:{size:"sm"},model:{value:t.selectCat,callback:function(e){t.selectCat=e},expression:"selectCat"}},[r("b-form-select-option",{attrs:{value:null}},[t._v("Please select a category")]),t._v(" "),t._l(t.getCategories,(function(e,i){return r("b-form-select-option",{key:i,attrs:{value:{id:e.id,name:e.name}}},[t._v("\n                        "+t._s(e.name)+"\n                    ")])}))],2)],1)]),t._v(" "),r("b-button",{staticClass:"btn-primary mr-1",attrs:{type:"submit",form:"edit-product-form"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.editProduct(e)}}},[t._v("Edit"),r("b-icon",{staticClass:"ml-2",attrs:{icon:"pencil"}})],1),t._v(" "),r("nuxt-link",{attrs:{to:"/admin/products"}},[r("b-button",{staticClass:"btn-primary"},[t._v("Back")])],1),t._v(" "),1==t.fail?r("b-alert",{staticClass:"mt-3 py-1 px-3",attrs:{show:"",variant:"danger"}},[t._v("Product already exist!")]):t._e(),t._v(" "),1==t.success?r("b-alert",{staticClass:"mt-3 py-1 px-3",attrs:{show:"",variant:"primary"}},[t._v("Success")]):t._e()],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);